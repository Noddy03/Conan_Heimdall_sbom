# Existing plugin list
set(PLUGINS lld gold)

# Filter out missing plugin sources
set(EXISTING_PLUGINS "")
foreach(plugin ${PLUGINS})
    if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/${plugin}/${plugin}Adapter.cpp")
        list(APPEND EXISTING_PLUGINS ${plugin})
    else()
        message(WARNING "Skipping missing plugin: ${plugin}")
    endif()
endforeach()

# Use only existing plugins
set(PLUGINS ${EXISTING_PLUGINS})
